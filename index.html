<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Station Master Ultra Live v9.0 - Professional Trading Intelligence</title>
    <style>
        :root {
            --primary: #0f172a; --accent: #6366f1; --gold: #f59e0b;
            --live-red: #ff4757; --success: #2ed573; --warning: #ffa502; --info: #1e90ff; --slate: #64748b;
        }
        body { font-family: 'Inter', sans-serif; background: #f1f5f9; margin: 0; padding: 20px; color: #1e293b; transition: 0.3s; }
        .container { max-width: 1500px; margin: auto; }
        
        .header { background: var(--primary); color: white; padding: 25px; border-radius: 20px; text-align: center; margin-bottom: 20px; border-bottom: 6px solid var(--live-red); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        textarea { width: 100%; height: 140px; border-radius: 12px; border: 2px solid #cbd5e1; padding: 12px; font-family: 'Consolas', monospace; font-size: 11px; outline: none; }
        textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(99,102,241,0.2); }
        
        .btn-main { width: 100%; padding: 22px; background: var(--accent); color: white; border: none; border-radius: 15px; font-size: 1.5rem; font-weight: 800; cursor: pointer; transition: 0.3s; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }
        .btn-main:hover { background: #4f46e5; transform: translateY(-3px); box-shadow: 0 10px 20px rgba(99, 102, 241, 0.4); }

        .dashboard { display: none; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 18px; }
        
        /* ESTILOS LIVE AVANZADOS CON SUSTENTO */
        .live-section { grid-column: 1 / -1; background: #fff1f2; padding: 25px; border-radius: 20px; border: 2px solid #fecdd3; margin-bottom: 10px; }
        .live-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .live-card-adv { background: white; padding: 20px; border-radius: 15px; border-top: 5px solid var(--live-red); box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .live-card-adv strong { display: flex; align-items: center; gap: 8px; color: var(--primary); font-size: 1rem; margin-bottom: 10px; }
        .live-card-adv p { font-size: 0.88rem; line-height: 1.5; color: #475569; margin-bottom: 12px; }
        .sustento { background: #f8fafc; padding: 12px; border-radius: 8px; border-left: 4px solid var(--info); font-size: 0.82rem; color: #1e293b; }
        .sustento b { color: var(--info); }

        .card { background: white; border-radius: 18px; padding: 22px; border: 1px solid #e2e8f0; position: relative; }
        .card h3 { margin: 0 0 15px 0; font-size: 0.85rem; text-transform: uppercase; color: var(--slate); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; }
        
        .semaforo { position: absolute; top: 18px; right: 20px; width: 16px; height: 16px; border-radius: 50%; border: 2px solid #fff; }
        .bg-green { background: var(--success); box-shadow: 0 0 10px var(--success); }
        .bg-yellow { background: var(--warning); box-shadow: 0 0 10px var(--warning); }
        .bg-red { background: var(--live-red); box-shadow: 0 0 10px var(--live-red); }

        .stat { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f8fafc; font-size: 0.92rem; }
        .val { font-weight: 700; color: var(--primary); }
        
        .chronicle-box { grid-column: 1 / -1; background: white; border-left: 8px solid var(--gold); padding: 30px; border-radius: 20px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05); }
        .chronicle-text { font-style: italic; color: #334155; line-height: 1.9; font-size: 1.15rem; }
        .dot { height: 10px; width: 10px; background: var(--live-red); border-radius: 50%; display: inline-block; animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>STATION MASTER ULTRA LIVE v9.0</h1>
        <p>Omni-Mercado: Pre-Match + Trading Live Sustentado con Big Data</p>
    </div>

    <div class="grid-inputs">
        <textarea id="dataL" placeholder="PEGA DATOS DEL LOCAL (Newcastle Jets)"></textarea>
        <textarea id="dataV" placeholder="PEGA DATOS DEL VISITANTE (Macarthur FC)"></textarea>
    </div>
    <button class="btn-main" onclick="procesarInteligencia()">EJECUTAR MINER√çA DE DATOS Y ESTRATEGIA LIVE</button>

    <div id="dashboard" class="dashboard">
        
        <div class="live-section">
            <h2 style="margin: 0 0 20px 0; font-size: 1.2rem; color: var(--live-red);"><span class="dot"></span> ESTRATEGIAS LIVE SUSTENTADAS</h2>
            <div class="live-grid">
                <div class="live-card-adv">
                    <strong>üî• Mercado: Over 0.5 Goles HT</strong>
                    <p id="l1-p"></p>
                    <div class="sustento" id="l1-s"></div>
                </div>
                <div class="live-card-adv">
                    <strong>üõ°Ô∏è Mercado: H√°ndicap Asi√°tico Vivo</strong>
                    <p id="l2-p"></p>
                    <div class="sustento" id="l2-s"></div>
                </div>
                <div class="live-card-adv">
                    <strong>üö© Mercado: Race to Corners (7)</strong>
                    <p id="l3-p"></p>
                    <div class="sustento" id="l3-s"></div>
                </div>
                <div class="live-card-adv">
                    <strong>üîÑ Mercado: Lay al Ganador Actual</strong>
                    <p id="l4-p"></p>
                    <div class="sustento" id="l4-s"></div>
                </div>
                <div class="live-card-adv">
                    <strong>üü® Mercado: Over 1.5 Tarjetas (2T)</strong>
                    <p id="l5-p"></p>
                    <div class="sustento" id="l5-s"></div>
                </div>
                <div class="live-card-adv">
                    <strong>‚ö° Mercado: Late Goal (Gol min 75+)</strong>
                    <p id="l6-p"></p>
                    <div class="sustento" id="l6-s"></div>
                </div>
            </div>
        </div>

        <div class="card"><div id="s1" class="semaforo"></div><h3>‚öñÔ∏è 1X2 & Doble Oportunidad</h3><div id="m-1x2"></div></div>
        <div class="card"><div id="s2" class="semaforo"></div><h3>‚öΩ Over / Under Goles</h3><div id="m-goles"></div></div>
        <div class="card"><div id="s3" class="semaforo"></div><h3>üìâ H√°ndicaps (ASI/EUR)</h3><div id="m-hand"></div></div>
        <div class="card"><div id="s4" class="semaforo"></div><h3>üéØ DNB / BTTS / PAR-IMP</h3><div id="m-spec"></div></div>
        <div class="card"><div id="s5" class="semaforo"></div><h3>üèÅ Marcador & HT/FT</h3><div id="m-score"></div></div>
        <div class="card"><div id="s6" class="semaforo"></div><h3>üü® Disciplina & Riesgo</h3><div id="m-cards"></div></div>

        <div class="card chronicle-box">
            <h3>üìù An√°lisis Cr√≠tico de Inteligencia Deportiva</h3>
            <div id="text-chronicle" class="chronicle-text">Esperando datos...</div>
        </div>
    </div>
</div>

<script>
function get(t, r, p=false) { const m = t.match(r); return m ? (p ? parseFloat(m[1])/100 : parseFloat(m[1])) : 0; }
function row(l, v) { return `<div class="stat"><span>${l}</span><span class="val">${v}</span></div>`; }

function procesarInteligencia() {
    const l = document.getElementById('dataL').value;
    const v = document.getElementById('dataV').value;
    if(!l || !v) return;

    const D = {
        ln: l.match(/flag\s*\n\s*(.*)/)?.[1] || "Local",
        vn: v.match(/flag\s*\n\s*(.*)/)?.[1] || "Visitante",
        l_ppg: get(l, /PPG \(Home\):\s*([\d.]+)/),
        v_ppg: get(v, /PPG \(Away\):\s*([\d.]+)/),
        l_gf: get(l, /GF per match\s*([\d.]+)/),
        v_ga: get(v, /GA per match\s*([\d.]+)/),
        v_gf: get(v, /GF per match\s*([\d.]+)/),
        l_ga: get(l, /GA per match\s*([\d.]+)/),
        l_015: get(l, /0-15\s*GF\s*(\d+)/),
        v_7590_ga: get(v, /76-90\s*GF\s*\d+\s*GA\s*(\d+)/),
        l_btts: get(l, /% both teams scored\s*(\d+)%/, true),
        v_btts: get(v, /% both teams scored\s*(\d+)%/, true),
        l_corn: get(l, /Corners For[\s\S]*?Home\s*([\d.]+)/),
        l_trail: get(l, /% Time trailing\s*(\d+)%/, true),
        v_eq: get(v, /Equalizing rate\s*(\d+)%/, true),
        l_o25: get(l, /% over 2.5 goals\s*(\d+)%/, true),
        v_o25: get(v, /% over 2.5 goals\s*(\d+)%/, true)
    };

    document.getElementById('dashboard').style.display = 'grid';

    // SUSTENTOS LIVE
    document.getElementById('l1-p').innerText = "Si el marcador es 0-0 al min 15', entrar a Over 0.5 Goles en la 1¬™ mitad.";
    document.getElementById('l1-s').innerHTML = `<b>POR QU√â:</b> El local anota el ${((D.l_015/10)*100).toFixed(0)}% de sus goles en casa en el arranque. El sistema detecta "Presi√≥n Temprana" alta.`;

    document.getElementById('l2-p').innerText = "Si el favorito va perdiendo 0-1, entrar a H√°ndicap Asi√°tico +1.0 o +1.5.";
    document.getElementById('l2-s').innerHTML = `<b>POR QU√â:</b> Con un PPG de ${D.l_ppg}, el local tiene alta probabilidad de retorno. El h√°ndicap vivo protege la inversi√≥n ante un empate.`;

    document.getElementById('l3-p').innerText = "Si el local no marca en los primeros 20', apostar a 'Local llega primero a 7 c√≥rners'.";
    document.getElementById('l3-s').innerHTML = `<b>POR QU√â:</b> El promedio de ${D.l_corn} c√≥rners por partido indica que el local ensancha el campo cuando el marcador est√° cerrado.`;

    document.getElementById('l4-p').innerText = "Si el visitante marca primero, hacer 'LAY' (apostar contra) su victoria.";
    document.getElementById('l4-s').innerHTML = `<b>POR QU√â:</b> El visitante tiene un Equalizing Rate de ${(D.v_eq*100).toFixed(0)}%, lo que significa que el local suele reaccionar y empatar el duelo.`;

    document.getElementById('l5-p').innerText = "Si el partido llega empatado al min 60', entrar a 'Over 1.5 tarjetas en el 2T'.";
    document.getElementById('l5-s').innerHTML = `<b>POR QU√â:</b> La tensi√≥n acumulada por el 'Time Trailing' (${(D.l_trail*100).toFixed(0)}%) dispara la fricci√≥n en duelos directos por puntos.`;

    document.getElementById('l6-p').innerText = "Al minuto 75', si el local necesita el gol, entrar al mercado 'Gol despu√©s del min 70'.";
    document.getElementById('l6-s').innerHTML = `<b>POR QU√â:</b> El visitante concede un volumen cr√≠tico de ${D.v_7590_ga} goles en el √∫ltimo tramo (76-90'). Es su ventana de mayor fatiga defensiva.`;

    // MERCADOS TRADICIONALES
    let pL = (D.l_ppg / (D.l_ppg + D.v_ppg + 0.4)) * 100;
    document.getElementById('s1').className = 'semaforo bg-yellow';
    document.getElementById('m-1x2').innerHTML = row("1X2", `${pL.toFixed(0)}% | 25% | ${(75-pL).toFixed(0)}%`) + row("Doble Op. 1X", (pL+25).toFixed(0)+"%");

    document.getElementById('s2').className = 'semaforo bg-green';
    let xG = ((D.l_gf + D.v_ga)/2) + ((D.v_gf + D.l_ga)/2);
    document.getElementById('m-goles').innerHTML = row("xG Total", xG.toFixed(2)) + row("Over 2.5", ((D.l_o25+D.v_o25)/2*100).toFixed(0)+"%");

    document.getElementById('s4').className = 'semaforo bg-green';
    document.getElementById('m-spec').innerHTML = row("BTTS (S√ç)", ((D.l_btts+D.v_btts)/2*100).toFixed(0)+"%") + row("DNB Local", "VALOR ALTO");

    document.getElementById('s6').className = 'semaforo bg-red';
    document.getElementById('m-cards').innerHTML = row("Tensi√≥n Live", (D.l_trail*100).toFixed(0)+"%") + row("Riesgo Disciplina", "ALTO");

    // CR√çTICA FINAL
    let cron = `El informe para el <span style="color:var(--accent); font-weight:bold;">${D.ln} vs ${D.vn}</span> confirma un escenario de alta volatilidad controlada. `;
    cron += `La clave del √©xito en este partido no est√° en el pre-match, sino en explotar la <span style="color:var(--live-red); font-weight:bold;">debilidad tard√≠a</span> del visitante, quien se desmorona tras el minuto 75. `;
    cron += `Sugerimos observar los primeros 15 minutos: si el local no anota, las cuotas de Over goles y C√≥rners se volver√°n extremadamente atractivas para el trading. `;
    cron += `Estad√≠sticamente, el BTTS es el mercado con menor riesgo t√©cnico dada la paridad de los promedios de GF/GA analizados.`;
    document.getElementById('text-chronicle').innerHTML = cron;
}
</script>
</body>
</html>
