<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Station Master v10 - Sentido Com칰n & Escenarios</title>
    <style>
        :root {
            --primary: #1e293b; --accent: #6366f1; --live: #dc2626;
            --success: #16a34a; --warning: #ca8a04; --bg: #f8fafc;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #334155; }
        .container { max-width: 1400px; margin: auto; }
        .header { background: var(--primary); color: white; padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 20px; }
        
        /* PANEL DE SENTIDO COM칔N LIVE */
        .live-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .escenario { background: white; border-radius: 12px; padding: 20px; border-left: 6px solid var(--live); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .escenario h4 { margin: 0 0 10px 0; color: var(--live); text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px; }
        .condicion { background: #fef2f2; padding: 10px; border-radius: 6px; font-weight: bold; margin-bottom: 10px; font-size: 0.9rem; border: 1px solid #fee2e2; }
        .accion { font-size: 0.95rem; line-height: 1.5; margin-bottom: 10px; }
        .porque { font-size: 0.85rem; color: #64748b; background: #f1f5f9; padding: 8px; border-radius: 4px; }

        .btn-main { width: 100%; padding: 20px; background: var(--accent); color: white; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: bold; cursor: pointer; margin-bottom: 25px; }
        .dashboard { display: none; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; }
        .card { background: white; padding: 15px; border-radius: 12px; border: 1px solid #e2e8f0; }
        .stat { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f1f5f9; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>STATION MASTER v10.0</h1>
        <p>Lectura de Escenarios Live & Sentido Com칰n Estad칤stico</p>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
        <textarea id="dL" style="height: 100px; padding: 10px;" placeholder="Datos Local"></textarea>
        <textarea id="dV" style="height: 100px; padding: 10px;" placeholder="Datos Visitante"></textarea>
    </div>
    <button class="btn-main" onclick="analizar()">ANALIZAR PARTIDO Y ESCENARIOS</button>

    <div id="dashboard" class="dashboard">
        <h2 style="grid-column: 1/-1; color: var(--live);">游뛀 ESCENARIOS LIVE: 쯈u칠 est치 pasando en tu TV?</h2>
        <div class="live-grid" id="live-scenarios" style="grid-column: 1/-1;"></div>

        <div class="card"><h3>1X2 & Goles</h3><div id="m1"></div></div>
        <div class="card"><h3>H치ndicaps</h3><div id="m2"></div></div>
        <div class="card"><h3>Especiales</h3><div id="m3"></div></div>
        <div class="card" style="grid-column: 1/-1;"><h3>Cr칤tica Pro</h3><p id="cronica" style="font-style: italic;"></p></div>
    </div>
</div>

<script>
function get(t, r, p=false) { const m = t.match(r); return m ? (p ? parseFloat(m[1])/100 : parseFloat(m[1])) : 0; }

function analizar() {
    const l = document.getElementById('dL').value;
    const v = document.getElementById('dV').value;
    if(!l || !v) return;
    
    const D = {
        ln: l.match(/flag\s*\n\s*(.*)/)?.[1] || "Local",
        vn: v.match(/flag\s*\n\s*(.*)/)?.[1] || "Visitante",
        l_ppg: get(l, /PPG \(Home\):\s*([\d.]+)/),
        v_ppg: get(v, /PPG \(Away\):\s*([\d.]+)/),
        l_gf: get(l, /GF per match\s*([\d.]+)/),
        v_ga: get(v, /GA per match\s*([\d.]+)/),
        v_7590: get(v, /76-90\s*GF\s*\d+\s*GA\s*(\d+)/),
        v_eq: get(v, /Equalizing rate\s*(\d+)%/, true)
    };

    document.getElementById('dashboard').style.display = 'grid';

    // L칍GICA DE ESCENARIOS (SENTIDO COM칔N)
    const escenarios = [
        {
            titulo: "El Favorito va perdiendo (Min 60+)",
            condicion: `Si ${D.ln} est치 perdiendo pero domina la posesi칩n.`,
            accion: `Entrar a <b>H치ndicap Asi치tico +0.5</b> para el Local o <b>Pr칩ximo Gol Local</b>.`,
            porque: `Sentido com칰n: Un equipo con PPG de ${D.l_ppg} rara vez se queda a cero en casa cuando presiona.`
        },
        {
            titulo: "Partido 'Muerto' (Min 75+)",
            condicion: `Si el marcador es 0-0 o 1-0 y el ritmo es lento.`,
            accion: `Esperar al minuto 80 y buscar el <b>Over 0.5 goles tard칤os</b>.`,
            porque: `Sentido com칰n: El visitante encaja mucho al final (${D.v_7590} goles). El cansancio f칤sico suele romper el orden t치ctico aqu칤.`
        },
        {
            titulo: "El Visitante marca primero",
            condicion: `Si ${D.vn} anota temprano y se repliega.`,
            accion: `No desesperar. Buscar <b>Doble Oportunidad 1X</b> cuando la cuota suba.`,
            porque: `Sentido com칰n: La tasa de empate de este visitante es del ${(D.v_eq*100).toFixed(0)}%. No saben cerrar partidos.`
        }
    ];

    document.getElementById('live-scenarios').innerHTML = escenarios.map(e => `
        <div class="escenario">
            <h4>${e.titulo}</h4>
            <div class="condicion">CU츼NDO ENTRAR: ${e.condicion}</div>
            <div class="accion">QU칄 HACER: ${e.accion}</div>
            <div class="porque">POR QU칄: ${e.porque}</div>
        </div>
    `).join('');

    // Relleno de mercados b치sicos
    document.getElementById('m1').innerHTML = `<div class="stat"><span>Prob. Victoria:</span> <b>${(D.l_ppg*30).toFixed(0)}%</b></div>`;
    document.getElementById('cronica').innerText = `Olvida las apuestas a ciegas. Si ves que el local ataca por las bandas y genera c칩rners, su estad칤stica de goles iniciales respalda tu intuici칩n. Si el partido est치 aburrido, la estad칤stica de goles tard칤os del visitante es tu mejor aliada para el trading final.`;
}
</script>
</body>
</html>
