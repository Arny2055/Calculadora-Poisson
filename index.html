<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de ROI de Apuestas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #0056b3;
        }
        /* Estilos de Contenedor de Equipos */
        .teams-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
        }
        .team-section {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #f9f9f9;
        }
        .team-section h2 {
            margin-top: 0;
            border-bottom: 2px solid #ccc;
            padding-bottom: 5px;
        }
        /* Estilos de Fila de Partido */
        .match-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }
        .match-row label {
            width: 70px;
            font-weight: bold;
        }
        .match-row input[type="number"] {
            width: 80px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        /* Estilos del SELECT de Resultado */
        .match-row select {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: background-color 0.3s, color 0.3s; /* Transici√≥n suave */
            font-weight: bold;
        }
        /* CLASES PARA LA MEJORA: Color del resultado */
        .result-won {
            background-color: #d4edda; /* Verde claro */
            color: #155724; /* Verde oscuro */
            border-color: #c3e6cb;
        }
        .result-lost {
            background-color: #f8d7da; /* Rojo claro */
            color: #721c24; /* Rojo oscuro */
            border-color: #f5c6cb;
        }
        .result-default {
            background-color: #fff;
            color: #333;
        }
        /* Estilos del Bot√≥n */
        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0056b3;
        }
        /* Estilos de Resultados */
        #results {
            margin-top: 30px;
            padding: 15px;
            border: 2px solid #28a745;
            border-radius: 6px;
            background-color: #e2f0e3;
        }
        #results h2 {
            color: #28a745;
            text-align: center;
        }
        .result-item {
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        .positive { color: #155724; font-weight: bold; }
        .negative { color: #721c24; font-weight: bold; }
        .zero { color: #6c757d; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üî¢ Calculadora de Retorno de Inversi√≥n (ROI)</h1>
        <p>Ingresa la cuota decimal y el resultado de los √∫ltimos 5 partidos para cada equipo. (Se asume una inversi√≥n de **1 unidad** por partido).</p>

        <div class="teams-container">
            <div class="team-section">
                <h2 style="color: #d9534f;">üè† Equipo Local</h2>
                <div id="local-matches">
                    </div>
            </div>

            <div class="team-section">
                <h2 style="color: #0275d8;">‚úàÔ∏è Equipo Visitante</h2>
                <div id="visitor-matches">
                    </div>
            </div>
        </div>
        
        <button onclick="calculateROI()">Calcular ROI</button>

        <div id="results" style="display: none;">
            <h2>üìä Resultados del ROI</h2>
            <div class="result-item" id="roi-local"></div>
            <div class="result-item" id="roi-visitor"></div>
            <hr>
            <div class="result-item" id="roi-combined"></div>
        </div>
    </div>

    <script>
        // --- L√≥gica de la Calculadora de ROI (JavaScript) ---

        const NUM_MATCHES = 5;
        const INVESTMENT_PER_MATCH = 1; 
        const TOTAL_INVESTMENT = NUM_MATCHES * INVESTMENT_PER_MATCH;

        /**
         * Aplica la clase CSS de color seg√∫n el resultado seleccionado (Ganado/Perdido).
         * @param {HTMLSelectElement} selectElement El elemento <select> cuyo valor cambi√≥.
         */
        function applyResultStyle(selectElement) {
            const value = selectElement.value;
            selectElement.classList.remove('result-won', 'result-lost', 'result-default');
            
            if (value === '1') {
                selectElement.classList.add('result-won');
            } else if (value === '0') {
                selectElement.classList.add('result-lost');
            } else {
                selectElement.classList.add('result-default');
            }
        }

        /**
         * Genera los campos de entrada para las cuotas y resultados.
         * @param {string} teamId El ID del contenedor ('local-matches' o 'visitor-matches').
         * @param {string} prefix Prefijo para los IDs de los inputs ('local' o 'visitor').
         */
        function generateInputs(teamId, prefix) {
            const container = document.getElementById(teamId);
            let html = '';
            for (let i = 1; i <= NUM_MATCHES; i++) {
                // Se a√±ade el evento 'onchange' para aplicar el estilo al cambiar la selecci√≥n
                html += `
                    <div class="match-row">
                        <label>Partido ${i}:</label>
                        <input type="number" id="${prefix}-quota-${i}" step="0.01" min="1.01" placeholder="Cuota" value="2.00" required>
                        <select id="${prefix}-result-${i}" onchange="applyResultStyle(this)" class="result-default">
                            <option value="" selected disabled>Resultado</option>
                            <option value="1">Ganado</option>
                            <option value="0">Perdido</option>
                        </select>
                    </div>
                `;
            }
            container.innerHTML = html;
        }

        // Generar inputs al cargar la p√°gina
        window.onload = function() {
            generateInputs('local-matches', 'local');
            generateInputs('visitor-matches', 'visitor');
        };

        /**
         * Calcula la ganancia total para un equipo.
         * @param {string} prefix Prefijo de los inputs ('local' o 'visitor').
         * @returns {number} Ganancia Neta Total (Retornos - Inversi√≥n Total) o null si falla la validaci√≥n.
         */
        function calculateNetProfit(prefix) {
            let totalReturn = 0;
            for (let i = 1; i <= NUM_MATCHES; i++) {
                const quotaInput = document.getElementById(`${prefix}-quota-${i}`);
                const resultSelect = document.getElementById(`${prefix}-result-${i}`);
                const teamName = prefix === 'local' ? 'Local' : 'Visitante';
                
                // Validaci√≥n de datos
                if (!quotaInput.value || isNaN(parseFloat(quotaInput.value)) || parseFloat(quotaInput.value) <= 1.0) {
                    alert(`üö® Error: Por favor, introduce una cuota v√°lida (mayor a 1.00) para el Partido ${i} del equipo ${teamName}.`);
                    return null;
                }
                if (resultSelect.value === "") {
                    alert(`üö® Error: Por favor, selecciona un resultado (Ganado/Perdido) para el Partido ${i} del equipo ${teamName}.`);
                    return null;
                }
                
                const quota = parseFloat(quotaInput.value);
                const isWon = parseInt(resultSelect.value); // 1 = Ganado, 0 = Perdido

                if (isWon === 1) {
                    // Si gana, el retorno es (Cuota * Stake), donde Stake es 1
                    totalReturn += quota; 
                } 
            }

            // Ganancia Neta = Retorno Total - Inversi√≥n Total (5 unidades)
            return totalReturn - TOTAL_INVESTMENT; 
        }

        /**
         * Calcula y muestra el ROI.
         */
        function calculateROI() {
            const netProfitLocal = calculateNetProfit('local');
            const netProfitVisitor = calculateNetProfit('visitor');

            // Si alguna validaci√≥n fall√≥, salimos
            if (netProfitLocal === null || netProfitVisitor === null) {
                document.getElementById('results').style.display = 'none';
                return;
            }

            // 1. C√°lculo del ROI Individual
            // ROI = (Ganancia Neta / Inversi√≥n Total) * 100
            const roiLocal = (netProfitLocal / TOTAL_INVESTMENT) * 100;
            const roiVisitor = (netProfitVisitor / TOTAL_INVESTMENT) * 100;

            // 2. C√°lculo del ROI Combinado
            const totalNetProfit = netProfitLocal + netProfitVisitor;
            const totalCombinedInvestment = TOTAL_INVESTMENT * 2; // 5 Local + 5 Visitante = 10 partidos
            const roiCombined = (totalNetProfit / totalCombinedInvestment) * 100;

            // 3. Mostrar Resultados
            const resultsDiv = document.getElementById('results');
            document.getElementById('roi-local').innerHTML = formatResult('üè† ROI Local', roiLocal);
            document.getElementById('roi-visitor').innerHTML = formatResult('‚úàÔ∏è ROI Visitante', roiVisitor);
            document.getElementById('roi-combined').innerHTML = formatResult('‚ú® ROI Combinado (10 Partidos)', roiCombined);

            resultsDiv.style.display = 'block';
        }

        /**
         * Formatea el resultado con color seg√∫n sea positivo, negativo o cero.
         */
        function formatResult(label, roi) {
            const roundedRoi = roi.toFixed(2);
            let className;
            let sign = roi > 0 ? '+' : '';

            if (roi > 0) {
                className = 'positive';
            } else if (roi < 0) {
                className = 'negative';
                sign = ''; // El signo negativo ya viene en el n√∫mero
            } else {
                className = 'zero';
            }
            return `${label}: <span class="${className}">${sign}${roundedRoi}%</span>`;
        }
    </script>

</body>
</html>
