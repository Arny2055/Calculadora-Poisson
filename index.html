javascript:(function(){
    let tables = Array.from(document.querySelectorAll('table'));
    /* Busca la tabla que tiene el rendimiento de LOCAL */
    let hTable = tables.find(t => t.innerText.includes('Home performance') || (t.innerText.includes('GP') && t.innerText.toLowerCase().includes('home')))?.innerText || '';
    /* Busca la tabla que tiene el rendimiento de VISITANTE */
    let vTable = tables.find(t => t.innerText.includes('Away performance') || (t.innerText.includes('GP') && t.innerText.toLowerCase().includes('away')))?.innerText || '';
    
    /* Si falló la búsqueda por texto, intentamos por las clases específicas de Soccerstats */
    if(!vTable) {
        let sortables = document.querySelectorAll('table.sortable');
        if(sortables.length >= 2) {
            hTable = sortables[0].innerText;
            vTable = sortables[1].innerText;
        }
    }

    let sData = document.body.innerText.match(/Home goals per match:[\s\S]*?Away goals per match:[\s\S]*?[\d.]+/)?.[0] || '';

    if(!hTable || !vTable) {
        alert('Error: No se pudo separar Local de Visitante. Asegúrate de estar en homeaway.asp');
        return;
    }

    let url = "https://arny2055.github.io/Calculadora-Poisson/index.html";
    window.location.href = url + '?hData=' + encodeURIComponent(hTable) + '&vData=' + encodeURIComponent(vTable) + '&sData=' + encodeURIComponent(sData);
})();
