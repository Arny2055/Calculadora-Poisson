<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Sueldo Quincenal Neto (MX)</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 700px; margin: 20px auto; padding: 20px; border: 1px solid #0072C6; border-radius: 12px; background-color: #f8f9fa; }
        h1, h2 { color: #0072C6; }
        label, input, button { display: block; margin-bottom: 12px; }
        input[type="number"] { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        hr { border: 0; border-top: 1px solid #eee; margin: 20px 0; }
        button { background-color: #0072C6; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; font-size: 1.1em; }
        button:hover { background-color: #005bb5; }
        #resultado { margin-top: 25px; padding: 15px; background-color: #e9ecef; border: 3px solid #0072C6; border-radius: 8px; }
        .neto { font-size: 1.5em; color: #157347; font-weight: bold; }
        .deduccion { color: #dc3545; font-weight: bold; }
    </style>
</head>
<body>

    <h1>Calculadora de N칩mina Quincenal - MX 游쓇릖</h1>
    <p>C치lculo estimado basado en la LFT y Tablas del SAT (2025).</p>
    <hr>

    <div id="formulario">
        <h2>Ingresos Base</h2>
        <label for="salarioMensual">Salario Mensual Bruto (Gravado):</label>
        <input type="number" id="salarioMensual" value="15000" min="0">

        <label for="diasLaborablesQuincena">D칤as Pagados en la Quincena:</label>
        <input type="number" id="diasLaborablesQuincena" value="15" min="1" max="15">
        
        <hr>
        
        <h2>Percepciones Adicionales (Gravadas)</h2>
        
        <label for="horasExtraSemana1">Horas Extra Trabajadas - Semana 1:</label>
        <input type="number" id="horasExtraSemana1" value="0" min="0">

        <label for="horasExtraSemana2">Horas Extra Trabajadas - Semana 2:</label>
        <input type="number" id="horasExtraSemana2" value="0" min="0">
        
        <p><em>(Se considera la tarifa "Doble" por simplicidad; las horas extra son parcialmente exentas).</em></p>

        <label for="diasFestivosTrabajados">D칤as Festivos/Descanso Obligatorio Trabajados:</label>
        <input type="number" id="diasFestivosTrabajados" value="0" min="0">
        
        <hr>

        <button onclick="calcularSueldo()">Calcular Sueldo Neto Quincenal</button>
    </div>

    <div id="resultado">
        Esperando c치lculo...
    </div>

    <script>
        // *** TABLA ISR QUINCENAL (Valores 2025 - Fuente SAT/Anexo 8) ***
        const ISR_QUINCENAL_TABLE = [
            { min: 0.01, max: 368.10, cuota: 0.00, excedente: 0.0192 },
            { min: 368.11, max: 3124.35, cuota: 7.05, excedente: 0.0640 },
            { min: 3124.36, max: 5490.75, cuota: 183.45, excedente: 0.1088 },
            { min: 5490.76, max: 6382.80, cuota: 441.00, excedente: 0.1600 },
            { min: 6382.81, max: 7641.90, cuota: 583.65, excedente: 0.1792 },
            { min: 7641.91, max: 15412.80, cuota: 809.25, excedente: 0.2136 },
            { min: 15412.81, max: 24292.65, cuota: 2469.15, excedente: 0.2352 },
            { min: 24292.66, max: 46378.50, cuota: 4557.75, excedente: 0.3000 },
            { min: 46378.51, max: 61838.10, cuota: 11183.40, excedente: 0.3200 },
            { min: 61838.11, max: 185514.30, cuota: 16130.55, excedente: 0.3400 },
            { min: 185514.31, max: Infinity, cuota: 58180.35, excedente: 0.3500 }
        ];

        // *** SUBSIDIO PARA EL EMPLEO (SE - Fijo Quincenal 2025) ***
        // Para ingresos hasta $5,085.50 quincenales (aproximado de 10,171.00/2)
        const SUBSIDIO_FIJO_QUINCENAL = 234.30; 
        const LIMITE_INGRESO_SE_QUINCENAL = 5085.50; // $10,171.00/2 (L칤mite mensual es $10,171.00)

        // *** VALORES FIJOS (UMA 2025 Estimada / Otros) ***
        const UMA_DIARIA = 110.00; // Valor Estimado 2025
        const UMA_MENSUAL = UMA_DIARIA * 30.4;
        const TASA_ISN_AGUASCALIENTES = 0.02; // 2.0%
        const CUOTA_FIJA_IMSS_DIARIA = UMA_DIARIA * 0.2392; // 23.92% de la UMA diaria

        function calcularISR(sueldo_gravado) {
            if (sueldo_gravado <= 0) return 0;
            
            // Buscar el rango en la tabla
            const tarifa = ISR_QUINCENAL_TABLE.find(r => sueldo_gravado >= r.min && sueldo_gravado <= r.max);

            if (!tarifa) return 0; // Error o fuera de rango (aunque Infinity cubre todo)

            const excedente = sueldo_gravado - tarifa.min;
            const impuestoMarginal = excedente * tarifa.excedente;
            const isr_causado = impuestoMarginal + tarifa.cuota;

            return isr_causado;
        }

        function calcularIMSS(salario_diario) {
            // Se asume el c치lculo b치sico de las cuotas Obrero-Patronales (solo la parte OBRERA)
            const cuota_fija = 0; // La cuota fija la paga el patr칩n

            // Excedente de 3 UMA's: 1.10% sobre el excedente (Solo si SDI > 3 UMAS)
            const tres_umas_diarias = UMA_DIARIA * 3;
            let excedente_tres_umas = 0;
            if (salario_diario > tres_umas_diarias) {
                excedente_tres_umas = (salario_diario - tres_umas_diarias) * 0.0110 * 15; // 1.10% * D칤as Quincenales
            }
            
            // Prestaciones en dinero y Gastos M칠dicos (1% sobre Salario Diario Integrado, se usa SDI como Salario Diario)
            const gastos_medicos = salario_diario * 0.004 * 15; // 0.4% * D칤as Quincenales

            // Invalidez y Vida (0.625% sobre Salario Diario Integrado)
            const invalidez_vida = salario_diario * 0.00625 * 15; // 0.625% * D칤as Quincenales
            
            // Cesant칤a en Edad Avanzada (1.125% sobre Salario Diario Integrado)
            const cesantia_vejez = salario_diario * 0.01125 * 15; // 1.125% * D칤as Quincenales

            // Suma de la parte OBRERA
            const total_imss = excedente_tres_umas + gastos_medicos + invalidez_vida + cesantia_vejez;
            return total_imss;
        }

        function calcularSueldo() {
            // 1. Obtener los valores de los inputs
            const salarioMensual = parseFloat(document.getElementById('salarioMensual').value) || 0;
            const diasLaborablesQuincena = parseFloat(document.getElementById('diasLaborablesQuincena').value) || 0;
            const horasExtraSemana1 = parseFloat(document.getElementById('horasExtraSemana1').value) || 0;
            const horasExtraSemana2 = parseFloat(document.getElementById('horasExtraSemana2').value) || 0;
            const diasFestivosTrabajados = parseFloat(document.getElementById('diasFestivosTrabajados').value) || 0;

            if (salarioMensual <= 0 || diasLaborablesQuincena <= 0) {
                document.getElementById('resultado').innerHTML = "Por favor, introduce un Salario Mensual y D칤as Laborables v치lidos.";
                return;
            }

            // --- C츼LCULOS DE INGRESO BRUTO ---
            const diasEnMes = 30.4; // Base m치s precisa para n칩mina
            const salarioDiario = salarioMensual / diasEnMes;
            const valorHoraNormal = salarioDiario / 8; // Asumiendo 8 horas/d칤a
            
            // Sueldo Base
            const sueldoBaseQuincenal = salarioDiario * diasLaborablesQuincena;

            // Horas Extra (Se asume tarifa doble para el c치lculo, son parcialmente exentas, pero para simplicidad gravamos el pago doble)
            const totalHorasExtra = horasExtraSemana1 + horasExtraSemana2;
            const pagoTotalHorasExtra = totalHorasExtra * (valorHoraNormal * 2); 
            
            // D칤as Festivos (Se asume Pago Triple = Salario Diario Normal + Pago Doble Adicional. El pago doble es gravado)
            const pagoTotalFestivosAdicional = diasFestivosTrabajados * (salarioDiario * 2); 

            // Sueldo BRUTO Total (Gravable para ISR, asumiendo que todos los extras entran a la base gravada para ser conservadores)
            const sueldoBrutoEstimado = sueldoBaseQuincenal + pagoTotalHorasExtra + pagoTotalFestivosAdicional;
            
            // --- DEDUCCIONES FISCALES (M칄XICO) ---
            
            // 2. C치lculo ISR (sobre el Ingreso Gravado)
            const isr_causado = calcularISR(sueldoBrutoEstimado);

            // 3. C치lculo Subsidio para el Empleo (SE)
            let subsidio_a_entregar = 0;
            if (sueldoBrutoEstimado <= LIMITE_INGRESO_SE_QUINCENAL) {
                subsidio_a_entregar = SUBSIDIO_FIJO_QUINCENAL;
            }

            // 4. ISR a Retener
            let isr_retenido = isr_causado;
            if (isr_causado > subsidio_a_entregar) {
                // El ISR a retener es la diferencia (ISR causado - Subsidio)
                isr_retenido = isr_causado - subsidio_a_entregar;
            } else {
                // Si el Subsidio es mayor o igual al ISR causado, no se retiene ISR
                isr_retenido = 0;
                // Si el Subsidio es mayor, la diferencia se entrega al trabajador
                subsidio_a_entregar = subsidio_a_entregar - isr_causado;
            }

            // 5. C치lculo IMSS (Aporte Obrero)
            const imss_obrero = calcularIMSS(salarioDiario);

            // --- C츼LCULO FINAL NETO ---
            const totalDeducciones = isr_retenido + imss_obrero;
            const sueldoNeto = sueldoBrutoEstimado - totalDeducciones + subsidio_a_entregar;
            
            // --- C츼LCULO EXTRA PARA AGUASCALIENTES (Impuesto sobre N칩mina - PAGA EL PATR칍N) ---
            const isn_aguascalientes = sueldoBrutoEstimado * TASA_ISN_AGUASCALIENTES;

            // 6. Mostrar Resultados
            document.getElementById('resultado').innerHTML = `
                <h3>游눶 Desglose de N칩mina Quincenal (MXN)</h3>
                <p><strong>Salario Diario Integrado (SDI):</strong> $${salarioDiario.toFixed(2)}</p>
                <p><strong>Sueldo Base Quincenal:</strong> $${sueldoBaseQuincenal.toFixed(2)}</p>
                <p><strong>Pago Extra por Horas/Festivos:</strong> $${(pagoTotalHorasExtra + pagoTotalFestivosAdicional).toFixed(2)}</p>
                <hr>
                <p style="font-size: 1.2em;"><strong>SUELDO BRUTO TOTAL: $${sueldoBrutoEstimado.toFixed(2)}</strong></p>
                <hr>

                <h3>Deducciones (Retenciones)</h3>
                <p class="deduccion"><strong>(-) ISR Retenido:</strong> $${isr_retenido.toFixed(2)}</p>
                <p class="deduccion"><strong>(-) IMSS (Aporte Obrero):</strong> $${imss_obrero.toFixed(2)}</p>
                <p><strong>Total Deducciones:</strong> $${totalDeducciones.toFixed(2)}</p>

                <h3>Beneficios</h3>
                <p style="color: green;"><strong>(+) Subsidio para el Empleo (Neto):</strong> $${subsidio_a_entregar.toFixed(2)}</p>
                <hr>
                <p class="neto"><strong>SUELDO NETO A PAGAR: $${sueldoNeto.toFixed(2)}</strong></p>
                <hr>
                
                <h4>Informaci칩n Fiscal Adicional (Aguascalientes)</h4>
                <p><strong>Impuesto Sobre N칩mina (2.0%):</strong> $${isn_aguascalientes.toFixed(2)}</p>
                <small>* Esta es la retenci칩n patronal para Aguascalientes y **no** se resta de tu sueldo neto.</small>
                <br><br>
                <small>丘멆잺 **AVISO LEGAL:** Este es un c치lculo estimado. La n칩mina real es compleja y debe ser calculada por un sistema de n칩mina o contador, considerando variables como UMA/salario real, exenciones de ley (horas extra, PTU, etc.), y el factor de integraci칩n de salario.</small>
            `;
        }
        
        // Ejecutar el c치lculo inicial al cargar la p치gina con los valores por defecto
        window.onload = calcularSueldo;
    </script>

</body>
</html>
