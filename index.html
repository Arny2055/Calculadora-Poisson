<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Station Master Ultra Pro - LIVE Intelligence</title>
    <style>
        :root {
            --primary: #0f172a; --accent: #6366f1; --gold: #f59e0b;
            --live: #ef4444; --success: #10b981; --slate: #64748b;
        }
        body { font-family: 'Inter', sans-serif; background: #f1f5f9; margin: 0; padding: 20px; }
        .container { max-width: 1400px; margin: auto; }
        .header { background: var(--primary); color: white; padding: 25px; border-radius: 20px; text-align: center; margin-bottom: 25px; border-bottom: 6px solid var(--live); }
        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        textarea { width: 100%; height: 120px; border-radius: 12px; border: 2px solid #cbd5e1; padding: 12px; font-family: monospace; font-size: 11px; }
        .btn-main { width: 100%; padding: 18px; background: var(--accent); color: white; border: none; border-radius: 12px; font-size: 1.2rem; font-weight: 800; cursor: pointer; transition: 0.3s; }
        .btn-main:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.3); }

        .dashboard { display: none; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 30px; }
        .card { background: white; border-radius: 16px; padding: 15px; border: 1px solid #e2e8f0; }
        .card h3 { margin: 0 0 12px 0; font-size: 0.8rem; text-transform: uppercase; color: var(--slate); border-bottom: 2px solid #f1f5f9; padding-bottom: 5px; }
        
        /* Estilos Live */
        .live-card { border-left: 5px solid var(--live); background: #fff1f2; }
        .live-signal { display: flex; align-items: center; gap: 10px; padding: 10px; background: white; border-radius: 8px; margin-bottom: 8px; border: 1px solid #fecdd3; }
        .dot { height: 10px; width: 10px; background-color: var(--live); border-radius: 50%; display: inline-block; animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        
        .stat { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f8fafc; font-size: 0.85rem; }
        .val { font-weight: bold; }
        .chronicle { grid-column: 1 / -1; background: white; padding: 25px; border-radius: 16px; border-left: 8px solid var(--gold); }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>STATION MASTER ULTRA LIVE v6.0</h1>
        <p>10 Mercados Pre-Match + Estrategia de Trading en Vivo</p>
    </div>

    <div class="grid-inputs">
        <textarea id="dataL" placeholder="DATOS LOCAL"></textarea>
        <textarea id="dataV" placeholder="DATOS VISITANTE"></textarea>
    </div>
    <button class="btn-main" onclick="ejecutarTodo()">CALCULAR PRE-MATCH Y SE√ëALES LIVE</button>

    <div id="dashboard" class="dashboard">
        <div class="card live-card full-width">
            <h3><span class="dot"></span> ESTRATEGIA LIVE (Trading en Tiempo Real)</h3>
            <div id="live-logic" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;"></div>
        </div>

        <div class="card"><h3>‚öñÔ∏è 1X2 & Doble Oportunidad</h3><div id="m-win"></div></div>
        <div class="card"><h3>‚öΩ Over / Under Goles</h3><div id="m-goles"></div></div>
        <div class="card"><h3>üìâ H√°ndicaps (Asi√°tico/EUR)</h3><div id="m-hand"></div></div>
        <div class="card"><h3>üéØ DNB / BTTS / Par-Impar</h3><div id="m-spec"></div></div>
        <div class="card"><h3>‚è±Ô∏è HT-FT & Marcador</h3><div id="m-score"></div></div>
        <div class="card"><h3>üü® Disciplina (Tarjetas)</h3><div id="m-cards"></div></div>

        <div class="card chronicle">
            <h3>üìù Informe Cr√≠tico de Inteligencia</h3>
            <div id="text-chronicle" style="font-style: italic; line-height: 1.6;"></div>
            <div id="final-picks" style="margin-top:15px;"></div>
        </div>
    </div>
</div>

<script>
function get(t, r, p=false) { const m = t.match(r); return m ? (p ? parseFloat(m[1])/100 : parseFloat(m[1])) : 0; }
function row(l, v) { return `<div class="stat"><span>${l}</span><span class="val">${v}</span></div>`; }

function ejecutarTodo() {
    const l = document.getElementById('dataL').value;
    const v = document.getElementById('dataV').value;
    if(!l || !v) return;

    const D = {
        ln: l.match(/flag\s*\n\s*(.*)/)?.[1] || "Local",
        vn: v.match(/flag\s*\n\s*(.*)/)?.[1] || "Visitante",
        l_ppg: get(l, /PPG \(Home\):\s*([\d.]+)/),
        v_ppg: get(v, /PPG \(Away\):\s*([\d.]+)/),
        l_gf: get(l, /GF per match\s*([\d.]+)/),
        v_ga: get(v, /GA per match\s*([\d.]+)/),
        v_gf: get(v, /GF per match\s*([\d.]+)/),
        l_ga: get(l, /GA per match\s*([\d.]+)/),
        l_015: get(l, /0-15\s*GF\s*(\d+)/),
        v_7590: get(v, /76-90\s*GF\s*\d+\s*GA\s*(\d+)/),
        l_btts: get(l, /% both teams scored\s*(\d+)%/, true),
        v_btts: get(v, /% both teams scored\s*(\d+)%/, true),
        l_trail: get(l, /% Time trailing\s*(\d+)%/, true),
        v_trail: get(v, /% Time trailing\s*(\d+)%/, true)
    };

    document.getElementById('dashboard').style.display = 'grid';

    // LOGICA LIVE
    let liveHTML = `
        <div class="live-signal"><div><strong>Ventana 0-20':</strong> Si no hay gol y el local presiona, entrar a 1ra Mitad Over 0.5. (Fuerza inicial local: ${D.l_015})</div></div>
        <div class="live-signal"><div><strong>Minuto 70':</strong> Si va empate o gana visita por 1, buscar gol tard√≠o. (Debilidad visita final: ${D.v_7590} goles encajados)</div></div>
        <div class="live-signal"><div><strong>Trading de Tarjetas:</strong> Si el marcador es X al minuto 60', entrar a Over Tarjetas. (Tensi√≥n: ${((D.l_trail+D.v_trail)*100).toFixed(0)}%)</div></div>
    `;
    document.getElementById('live-logic').innerHTML = liveHTML;

    // RESTO DE MERCADOS (Mantenidos)
    let pL = (D.l_ppg / (D.l_ppg + D.v_ppg + 0.5)) * 100;
    let pE = 25, pV = 100 - pL - pE;
    document.getElementById('m-win').innerHTML = row("1X2", `${pL.toFixed(0)}% / ${pE}% / ${pV.toFixed(0)}%`) + row("1X / X2", `${(pL+pE).toFixed(0)}% / ${(pV+pE).toFixed(0)}%`);
    
    let xG = ((D.l_gf + D.v_ga)/2) + ((D.v_gf + D.l_ga)/2);
    document.getElementById('m-goles').innerHTML = row("xG Total", xG.toFixed(2)) + row("Over 2.5", (xG*30).toFixed(0) + "%");
    document.getElementById('m-hand').innerHTML = row("Asi√°tico", pL > pV ? "-0.5 L" : "+0.5 V") + row("Europeo", "L (H-1)");
    document.getElementById('m-spec').innerHTML = row("BTTS", ((D.l_btts+D.v_btts)/2*100).toFixed(0) + "%") + row("DNB", "Local") + row("Par/Impar", "Par");
    document.getElementById('m-score').innerHTML = row("Marcador", Math.round(xG*0.6)+"-"+Math.round(xG*0.4));
    document.getElementById('m-cards').innerHTML = row("Riesgo", D.l_trail > 0.3 ? "ALTO" : "MEDIO");

    // CRITICA
    document.getElementById('text-chronicle').innerHTML = `El partido en vivo debe monitorearse especialmente en los extremos. La estad√≠stica de <span style="color:var(--live); font-weight:bold;">${D.l_015} goles iniciales</span> del local invita a buscar mercados r√°pidos. Si el partido llega al minuto 75 con un marcador cerrado, la fragilidad de ${D.vn} es el punto de entrada clave.`;
}
</script>
</body>
</html>
