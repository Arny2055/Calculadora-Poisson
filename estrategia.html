<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Portafolio Pro</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --accent: #3b82f6; --success: #10b981; --danger: #ef4444; --gold: #fbbf24; --warning: #f59e0b; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); padding: 15px; margin: 0; }
        .container { max-width: 600px; margin: auto; }
        .nav-links { display: flex; gap: 10px; margin-bottom: 20px; }
        .btn-nav { flex: 1; text-align: center; padding: 12px; background: var(--card); color: white; text-decoration: none; border-radius: 10px; border: 1px solid var(--accent); font-size: 12px; font-weight: bold; }
        .team-card { background: var(--card); border-radius: 16px; padding: 16px; margin-bottom: 12px; border: 1px solid #334155; position: relative; }
        .strategy-tag { position: absolute; top: -8px; right: 15px; background: var(--gold); color: #000; font-size: 9px; font-weight: 900; padding: 2px 8px; border-radius: 4px; }
        .timer-container { margin: 10px 0; font-size: 10px; }
        .progress-bar { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-top: 4px; }
        .progress-fill { height: 100%; border-radius: 3px; transition: width 0.5s; }
        .eff-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .eff-item { background: #0f172a; padding: 10px; border-radius: 8px; text-align: center; }
        .value-area { margin-top: 15px; background: #0f172a; padding: 12px; border-radius: 10px; border: 1px solid #334155; }
        input { width: 80px; padding: 8px; border-radius: 6px; border: 1px solid var(--accent); background: var(--card); color: white; text-align: center; }
        .btn-place { display: none; width: 100%; margin-top: 10px; padding: 12px; background: var(--success); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-del { width: 100%; margin-top: 10px; padding: 8px; background: transparent; color: var(--danger); border: 1px solid var(--danger); border-radius: 8px; font-size: 11px; }
    </style>
</head>
<body>
<div class="container">
    <div class="nav-links">
        <a href="index.html" class="btn-nav">AN√ÅLISIS</a>
        <a href="apuestas.html" class="btn-nav" style="background: var(--gold); color: black;">MIS APUESTAS üéØ</a>
    </div>
    <div id="savedContainer"></div>
</div>
<script>
let savedData = [];
function load() {
    savedData = JSON.parse(localStorage.getItem('bettingStrategy') || "[]");
    render();
}
function checkValue(input, targetOdd, index) {
    const val = parseFloat(input.value);
    const btn = document.getElementById('btn-place-' + index);
    const res = document.getElementById('res-' + index);
    if(val >= targetOdd) {
        res.innerHTML = "‚úÖ VALOR DETECTADO"; res.style.color = "var(--success)";
        btn.style.display = "block";
    } else {
        res.innerHTML = val ? "‚ùå SIN VALOR" : ""; res.style.color = "var(--danger)";
        btn.style.display = "none";
    }
}
function placeBet(index) {
    const item = savedData[index];
    const cuotaReal = document.getElementById('input-'+index).value;
    const activeBets = JSON.parse(localStorage.getItem('activeBets') || "[]");
    activeBets.push({
        ...item,
        cuotaFinal: cuotaReal,
        fechaColocada: new Date().toLocaleString(),
        estado: 'PENDIENTE'
    });
    localStorage.setItem('activeBets', JSON.stringify(activeBets));
    alert("¬°Apuesta enviada a Mis Apuestas!");
}
function render() {
    const container = document.getElementById('savedContainer');
    const ahora = new Date();
    container.innerHTML = savedData.map((item, i) => {
        const diffDias = Math.floor((ahora - new Date(item.timestamp)) / 86400000);
        const restantes = Math.max(0, 30 - diffDias);
        const pct = (restantes/30)*100;
        return `
        <div class="team-card">
            <span class="strategy-tag">${item.estrategia}</span>
            <div style="font-weight:bold; color:var(--gold)">${item.equipo}</div>
            <div class="timer-container">
                Vigencia: ${restantes} d√≠as
                <div class="progress-bar"><div class="progress-fill" style="width:${pct}%; background:${restantes<15?'var(--warning)':'var(--success)'}"></div></div>
            </div>
            <div class="eff-grid">
                <div class="eff-item"><small>EQUILIBRIO</small><br>@${item.minOdd}</div>
                <div class="eff-item" style="border:1px solid var(--success)"><small>OBJETIVO</small><br>@${item.targetOdd}</div>
            </div>
            <div class="value-area">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <small>¬øCuota actual?</small>
                    <input type="number" step="0.01" id="input-${i}" oninput="checkValue(this, ${item.targetOdd}, ${i})">
                </div>
                <div id="res-${i}" style="font-size:11px; font-weight:bold; margin-top:5px; text-align:center;"></div>
                <button id="btn-place-${i}" class="btn-place" onclick="placeBet(${i})">COLOCAR ESTA APUESTA</button>
            </div>
            <button class="btn-del" onclick="deleteItem(${i})">ELIMINAR DEL PORTAFOLIO</button>
        </div>`;
    }).join('');
}
function deleteItem(i) { if(confirm('¬øEliminar?')) { savedData.splice(i, 1); localStorage.setItem('bettingStrategy', JSON.stringify(savedData)); render(); } }
window.onload = load;
</script>
</body>
</html>
